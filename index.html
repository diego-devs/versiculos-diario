<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vers√≠culos del D√≠a</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0f1623;--bg2:#161f30;--bg3:#1e2940;
  --gold:#c9a96e;--gold-dim:#a8904f;
  --cream:#e8e2d4;--blue-soft:#3a5a8a50;
  --text:#c8c0b4;--text-dim:#7a7570;
}
html{scroll-behavior:smooth}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);font-weight:300;line-height:1.7;min-height:100vh}
a{color:var(--gold);text-decoration:none;transition:color .2s}
a:hover{color:var(--cream)}

.header{text-align:center;padding:3rem 1.5rem 2rem;border-bottom:1px solid var(--bg3)}
.header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2.2rem,6vw,3.8rem);font-weight:600;color:var(--cream);letter-spacing:.02em}
.header .cross{color:var(--gold);opacity:.8;font-size:.8em}
.header p{color:var(--text-dim);font-size:.95rem;margin-top:.4rem;font-style:italic}
.header .counter{color:var(--text-dim);font-size:.85rem;margin-top:.2rem}

.nav{display:flex;justify-content:center;gap:.5rem;padding:1.2rem 1rem;flex-wrap:wrap;position:sticky;top:0;background:var(--bg);z-index:100;border-bottom:1px solid var(--bg3)}
.nav button{background:var(--bg2);color:var(--text-dim);border:1px solid var(--bg3);padding:.45rem 1.1rem;border-radius:2rem;font-size:.85rem;cursor:pointer;font-family:'Inter',sans-serif;transition:all .25s}
.nav button:hover,.nav button.active{background:var(--blue-soft);color:var(--cream);border-color:var(--gold)}

.search-wrap{max-width:480px;margin:1.5rem auto;padding:0 1.5rem}
.search-wrap input{width:100%;padding:.7rem 1.2rem;background:var(--bg2);border:1px solid var(--bg3);border-radius:2rem;color:var(--cream);font-size:.9rem;font-family:'Inter',sans-serif;outline:none;transition:border-color .2s}
.search-wrap input::placeholder{color:var(--text-dim)}
.search-wrap input:focus{border-color:var(--gold-dim)}

.articles{max-width:720px;margin:0 auto;padding:1rem 1.5rem 1rem}
.articles-count{font-size:.8rem;color:var(--text-dim);margin-bottom:1rem;padding-left:.25rem}
.article{background:var(--bg2);border:1px solid var(--bg3);border-radius:12px;margin-bottom:1.2rem;overflow:hidden;cursor:pointer;transition:transform .2s,border-color .3s;opacity:0;transform:translateY(18px);animation:fadeUp .5s ease forwards}
.article:hover{border-color:var(--gold-dim);transform:translateY(-2px)}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.article-head{padding:1.4rem 1.6rem;display:flex;gap:1.2rem;align-items:flex-start}
.date-badge{flex-shrink:0;width:52px;height:56px;background:var(--bg3);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid var(--gold-dim)}
.date-badge .day-num{font-size:1.3rem;font-weight:600;color:var(--gold);line-height:1}
.date-badge .month-abbr{font-size:.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:.05em}
.article-info{flex:1;min-width:0}
.article-ref{font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:600;color:var(--gold);line-height:1.3;margin-bottom:.2rem}
.article-title{font-size:.9rem;color:var(--text-dim);font-style:italic}
.expand-hint{font-size:.7rem;color:var(--text-dim);margin-top:.3rem;opacity:.6}
.article-body{max-height:0;overflow:hidden;transition:max-height .5s ease,padding .3s ease;padding:0 1.6rem}
.article.open .article-body{max-height:3000px;padding:0 1.6rem 1.6rem}
.verse-block{font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-style:italic;color:var(--cream);line-height:1.7;padding:1rem 1.2rem;background:var(--bg);border-left:3px solid var(--gold);border-radius:0 8px 8px 0;margin-bottom:1.2rem}
.verse-ref{font-size:.82rem;color:var(--gold-dim);font-style:normal;margin-top:.5rem;display:block}
.article-reflection{color:var(--text);font-size:.92rem;line-height:1.8;white-space:pre-line}
.article-tags{margin-top:.8rem;display:flex;flex-wrap:wrap;gap:.4rem}
.tag{font-size:.72rem;padding:.2rem .6rem;background:var(--bg);border-radius:1rem;color:var(--text-dim);border:1px solid var(--bg3)}

.pagination{display:flex;justify-content:center;align-items:center;gap:.4rem;padding:1rem 1.5rem 2rem;max-width:720px;margin:0 auto}
.page-btn{font-family:'Inter',sans-serif;font-size:.85rem;font-weight:500;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--bg2);color:var(--text-dim);border:1px solid var(--bg3);border-radius:8px;cursor:pointer;transition:all .25s}
.page-btn:hover:not(.disabled):not(.active){border-color:var(--gold);color:var(--cream)}
.page-btn.active{background:var(--gold);color:var(--bg);border-color:var(--gold)}
.page-btn.disabled{opacity:.3;cursor:not-allowed}
.page-dots{color:var(--text-dim);font-size:.85rem;padding:0 .25rem}

.subscribe{max-width:720px;margin:0 auto 2rem;padding:0 1.5rem}
.subscribe-inner{text-align:center;padding:2.5rem 2rem;background:var(--bg2);border:1px solid var(--bg3);border-radius:12px}
.subscribe-label{font-size:.7rem;font-weight:500;letter-spacing:.25em;text-transform:uppercase;color:var(--gold);margin-bottom:.75rem}
.subscribe-title{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:400;color:var(--cream);margin-bottom:.5rem}
.subscribe-desc{font-size:.88rem;color:var(--text-dim);margin-bottom:1.5rem;max-width:400px;margin-left:auto;margin-right:auto}
.subscribe-btn{display:inline-block;padding:.8rem 2.2rem;background:var(--gold);color:var(--bg);text-decoration:none;border-radius:2rem;font-family:'Inter',sans-serif;font-size:.88rem;font-weight:600;transition:all .25s;margin-bottom:.75rem;border:none;cursor:pointer}
.subscribe-btn:hover{background:var(--cream);color:var(--bg);transform:translateY(-1px)}
.subscribe-copy-btn{display:inline-block;padding:.6rem 1.5rem;background:transparent;color:var(--gold);border:1px solid var(--gold-dim);border-radius:2rem;font-family:'Inter',sans-serif;font-size:.82rem;font-weight:500;cursor:pointer;transition:all .25s;margin-left:.5rem;margin-bottom:1rem}
.subscribe-copy-btn:hover{background:var(--blue-soft);border-color:var(--gold)}
.subscribe-note{font-size:.75rem;color:var(--text-dim);max-width:450px;margin:0 auto}
.subscribe-note strong{color:var(--text)}

.footer{text-align:center;padding:2rem 1.5rem;border-top:1px solid var(--bg3);color:var(--text-dim);font-size:.75rem}
.footer .footer-quote{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:.9rem;color:var(--text);margin-bottom:.75rem;max-width:500px;margin-left:auto;margin-right:auto}

.scroll-top{position:fixed;bottom:2rem;right:2rem;width:44px;height:44px;border-radius:50%;background:var(--bg2);border:1px solid var(--bg3);color:var(--gold);font-size:1.2rem;cursor:pointer;opacity:0;pointer-events:none;transition:all .3s;display:flex;align-items:center;justify-content:center;z-index:200}
.scroll-top.show{opacity:1;pointer-events:auto}
.scroll-top:hover{background:var(--blue-soft);border-color:var(--gold)}

.empty{text-align:center;padding:3rem;color:var(--text-dim);font-style:italic}

@media(max-width:480px){
  .article-head{padding:1.1rem 1.2rem;gap:.8rem}
  .article-ref{font-size:1.1rem}
  .article.open .article-body{padding:0 1.2rem 1.2rem}
  .date-badge{width:44px;height:48px}
  .date-badge .day-num{font-size:1.1rem}
}
</style>
</head>
<body>

<header class="header">
  <h1>Vers√≠culos del D√≠a <span class="cross">‚úùÔ∏è</span></h1>
  <p>Palabra de Dios para cada d√≠a</p>
  <div class="counter" id="counter"></div>
</header>

<nav class="nav" id="nav"></nav>

<div class="search-wrap">
  <input type="text" id="search" placeholder="Buscar por vers√≠culo, libro, reflexi√≥n...">
</div>

<main class="articles" id="articles">
  <p class="articles-count" id="articlesCount"></p>
  <div id="articlesList"></div>
</main>

<div class="pagination" id="pagination"></div>

<section class="subscribe" id="subscribe">
  <div class="subscribe-inner">
    <p class="subscribe-label">Newsletter</p>
    <h2 class="subscribe-title">Recibe el vers√≠culo del d√≠a en tu correo</h2>
    <p class="subscribe-desc">Cada ma√±ana, un vers√≠culo con reflexi√≥n directo a tu bandeja. Sin spam, solo la Palabra de Dios.</p>
    <a href="mailto:david.asistente.ai@gmail.com?subject=SUSCRIBIR%20BIBLIA&body=Quiero%20recibir%20el%20vers%C3%ADculo%20diario." class="subscribe-btn">
      ‚úùÔ∏è Suscribirme por correo
    </a>
    <button class="subscribe-copy-btn" onclick="copyEmail(this)">üìã Copiar correo</button>
    <p class="subscribe-note">Env√≠a un correo con asunto <strong>"SUSCRIBIR BIBLIA"</strong> a <strong>david.asistente.ai@gmail.com</strong> y recibir√°s el vers√≠culo cada ma√±ana. Para cancelar, env√≠a <strong>"CANCELAR BIBLIA"</strong>.</p>
  </div>
</section>

<footer class="footer">
  <p class="footer-quote">¬´L√°mpara es a mis pies tu palabra, y lumbrera a mi camino.¬ª ‚Äî Salmos 119:105</p>
  <p>Vers√≠culos del D√≠a ‚Äî Palabra de Dios para cada d√≠a</p>
</footer>

<button class="scroll-top" id="scrollTop" aria-label="Volver arriba">‚Üë</button>

<script>
let allArticles=[];
let currentPage=1;
const PER_PAGE=10;
let activeFilter='all';

const months={1:'Enero',2:'Febrero',3:'Marzo',4:'Abril',5:'Mayo',6:'Junio',7:'Julio',8:'Agosto',9:'Septiembre',10:'Octubre',11:'Noviembre',12:'Diciembre'};
const monthAbbr={1:'ENE',2:'FEB',3:'MAR',4:'ABR',5:'MAY',6:'JUN',7:'JUL',8:'AGO',9:'SEP',10:'OCT',11:'NOV',12:'DIC'};

async function init(){
  const res=await fetch('articles/index.json');
  const index=await res.json();
  const loaded=await Promise.all(index.map(async e=>{
    const r=await fetch('articles/'+e.file);
    return r.json();
  }));
  allArticles=loaded.sort((a,b)=>b.date.localeCompare(a.date));
  document.getElementById('counter').textContent=allArticles.length+' d√≠as de vers√≠culos b√≠blicos';
  buildNav();
  renderCurrentView();
}

function buildNav(){
  const nav=document.getElementById('nav');
  const ms=[...new Set(allArticles.map(a=>a.month))].sort((a,b)=>a-b);
  const btnAll=mk('button','Todos');
  btnAll.classList.add('active');
  btnAll.onclick=()=>{activeFilter='all';currentPage=1;setActive(btnAll);renderCurrentView()};
  nav.appendChild(btnAll);
  for(const m of ms){
    const btn=mk('button',months[m]);
    btn.onclick=()=>{activeFilter=m;currentPage=1;setActive(btn);renderCurrentView()};
    nav.appendChild(btn);
  }
}

function getFiltered(){
  return activeFilter==='all'?allArticles:allArticles.filter(a=>a.month===activeFilter);
}

function renderCurrentView(){
  const filtered=getFiltered();
  const totalPages=Math.ceil(filtered.length/PER_PAGE);
  const start=(currentPage-1)*PER_PAGE;
  const page=filtered.slice(start,start+PER_PAGE);
  document.getElementById('articlesCount').textContent=filtered.length+' vers√≠culo'+(filtered.length!==1?'s':'');
  render(page);
  renderPagination(totalPages);
}

function goToPage(p){
  const filtered=getFiltered();
  const totalPages=Math.ceil(filtered.length/PER_PAGE);
  if(p<1||p>totalPages)return;
  currentPage=p;
  renderCurrentView();
  document.querySelector('.nav').scrollIntoView({behavior:'smooth'});
}

function setActive(btn){document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));btn.classList.add('active')}
function mk(tag,text){const e=document.createElement(tag);if(text)e.textContent=text;return e}

function render(arts){
  const c=document.getElementById('articlesList');
  c.innerHTML='';
  if(!arts.length){c.innerHTML='<div class="empty">No se encontraron vers√≠culos.</div>';return}
  arts.forEach((a,i)=>{
    const el=document.createElement('article');
    el.className='article';
    el.style.animationDelay=Math.min(i*60,600)+'ms';
    el.innerHTML=`
      <div class="article-head">
        <div class="date-badge">
          <span class="day-num">${a.day}</span>
          <span class="month-abbr">${monthAbbr[a.month]}</span>
        </div>
        <div class="article-info">
          <div class="article-ref">${esc(a.reference)}</div>
          <div class="article-title">${esc(a.title)}</div>
          <div class="expand-hint">Toca para leer m√°s</div>
        </div>
      </div>
      <div class="article-body">
        <div class="verse-block">
          ¬´${esc(a.verse)}¬ª
          <span class="verse-ref">‚Äî ${esc(a.reference)}</span>
        </div>
        <div class="article-reflection">${esc(a.reflection)}</div>
        ${a.tags?`<div class="article-tags">${a.tags.map(t=>`<span class="tag">${esc(t)}</span>`).join('')}</div>`:''}
      </div>`;
    el.querySelector('.article-head').addEventListener('click',()=>el.classList.toggle('open'));
    c.appendChild(el);
  });
}

function esc(s){const d=document.createElement('div');d.textContent=s;return d.innerHTML}

function renderPagination(totalPages){
  const c=document.getElementById('pagination');
  if(totalPages<=1){c.innerHTML='';return}
  let h='';
  h+=`<button class="page-btn ${currentPage===1?'disabled':''}" onclick="goToPage(${currentPage-1})" ${currentPage===1?'disabled':''}>‚Äπ</button>`;
  for(let i=1;i<=totalPages;i++){
    if(totalPages>7&&i>2&&i<totalPages-1&&Math.abs(i-currentPage)>1){
      if(i===3||i===totalPages-2)h+=`<span class="page-dots">‚Ä¶</span>`;
      continue;
    }
    h+=`<button class="page-btn ${i===currentPage?'active':''}" onclick="goToPage(${i})">${i}</button>`;
  }
  h+=`<button class="page-btn ${currentPage===totalPages?'disabled':''}" onclick="goToPage(${currentPage+1})" ${currentPage===totalPages?'disabled':''}>‚Ä∫</button>`;
  c.innerHTML=h;
}

document.getElementById('search').addEventListener('input',function(){
  const q=this.value.toLowerCase().trim();
  if(!q){activeFilter='all';currentPage=1;renderCurrentView();return}
  const matches=allArticles.filter(a=>
    a.verse.toLowerCase().includes(q)||
    a.reference.toLowerCase().includes(q)||
    a.book.toLowerCase().includes(q)||
    a.reflection.toLowerCase().includes(q)||
    a.title.toLowerCase().includes(q)||
    (a.tags||[]).some(t=>t.toLowerCase().includes(q))
  );
  document.getElementById('articlesCount').textContent=matches.length+' resultado'+(matches.length!==1?'s':'');
  render(matches);
  document.getElementById('pagination').innerHTML='';
});

function copyEmail(btn){
  navigator.clipboard.writeText('david.asistente.ai@gmail.com').then(()=>{
    const orig=btn.textContent;
    btn.textContent='‚úÖ ¬°Copiado!';
    setTimeout(()=>{btn.textContent=orig},2000);
  });
}

const stBtn=document.getElementById('scrollTop');
window.addEventListener('scroll',()=>stBtn.classList.toggle('show',window.scrollY>400));
stBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

init();
</script>
</body>
</html>
